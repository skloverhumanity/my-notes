<!DOCTYPE html>
<html lang="mr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Pro Mind Map Tool</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <style>
        :root { --primary: #2563eb; --bg: #f8fafc; --text: #1e293b; }
        body.dark { --bg: #1e293b; --text: #f8fafc; }
        
        * { box-sizing: border-box; transition: 0.3s; }
        body { font-family: 'Inter', sans-serif; margin: 0; background-color: var(--bg); color: var(--text); overflow: hidden; display: flex; flex-direction: column; height: 100vh; }
        
        header { background: var(--primary); color: white; padding: 10px 20px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        
        .main-container { display: flex; flex: 1; overflow: hidden; }
        
        /* Editor Area */
        .editor-container { width: 380px; display: flex; flex-direction: column; background: white; border-right: 1px solid #ddd; padding: 15px; box-shadow: 2px 0 5px rgba(0,0,0,0.05); }
        body.dark .editor-container { background: #0f172a; border-color: #334155; }
        
        textarea { flex: 1; width: 100%; padding: 15px; border: 1px solid #cbd5e1; border-radius: 8px; font-size: 14px; font-family: 'Fira Code', monospace; resize: none; outline: none; background: transparent; color: inherit; }
        
        .toolbar { margin-top: 10px; display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }
        
        button { padding: 10px; border: none; border-radius: 6px; cursor: pointer; font-weight: 600; font-size: 13px; }
        .btn-blue { background: #2563eb; color: white; }
        .btn-green { background: #10b981; color: white; }
        .btn-outline { border: 1px solid #cbd5e1; background: transparent; color: var(--text); }

        /* Viewer Area */
        .viewer-container { flex: 1; padding: 20px; overflow: auto; display: flex; flex-direction: column; background: var(--bg); position: relative; }
        #graphDiv { margin: auto; min-width: 600px; }

        @media (max-width: 768px) {
            .main-container { flex-direction: column; }
            .editor-container { width: 100%; height: 45%; }
        }
    </style>
</head>
<body>

<header>
    <span>üöÄ My MindMap Pro</span>
    <div>
        <button class="btn-outline" onclick="toggleDark()" style="padding: 5px 10px;">üåô/‚òÄÔ∏è</button>
    </div>
</header>

<div class="main-container">
    <div class="editor-container">
        <textarea id="noteInput" oninput="renderMap()" placeholder="‡§§‡•Å‡§Æ‡§ö‡•ç‡§Ø‡§æ ‡§®‡•ã‡§ü‡•ç‡§∏ ‡§á‡§•‡•á ‡§≤‡§ø‡§π‡§æ...">
mindmap
  root((‡§Æ‡§æ‡§ù‡•á ‡§ß‡•ç‡§Ø‡•á‡§Ø 2024))
    ‡§Ö‡§≠‡•ç‡§Ø‡§æ‡§∏
      ‡§ó‡§£‡§ø‡§§
      ‡§µ‡§ø‡§ú‡•ç‡§û‡§æ‡§®
    ‡§Ü‡§∞‡•ã‡§ó‡•ç‡§Ø
      ‡§µ‡•ç‡§Ø‡§æ‡§Ø‡§æ‡§Æ
      ‡§Ø‡•ã‡§ó‡§æ
    ‡§™‡•ç‡§∞‡•ã‡§ú‡•á‡§ï‡•ç‡§ü‡•ç‡§∏
      ‡§µ‡•á‡§¨‡§∏‡§æ‡§à‡§ü
        </textarea>
        
        <div class="toolbar">
            <button class="btn-blue" onclick="renderMap()">Update Map</button>
            <button class="btn-green" onclick="downloadMap()">Download PNG</button>
            <button class="btn-outline" onclick="clearNotes()">Clear All</button>
            <button class="btn-outline" onclick="copyText()">Copy Text</button>
        </div>
    </div>

    <div class="viewer-container">
        <div id="graphDiv" class="mermaid"></div>
    </div>
</div>

<script>
    mermaid.initialize({ startOnLoad: true, theme: 'default', securityLevel: 'loose' });

    // LocalStorage ‡§Æ‡§ß‡•Ç‡§® ‡§ú‡•Å‡§®‡•ç‡§Ø‡§æ ‡§®‡•ã‡§ü‡•ç‡§∏ ‡§≤‡•ã‡§° ‡§ï‡§∞‡§£‡•á
    window.onload = () => {
        const savedNotes = localStorage.getItem('myMindMapNotes');
        if (savedNotes) {
            document.getElementById('noteInput').value = savedNotes;
        }
        renderMap();
    };

    async function renderMap() {
        const input = document.getElementById('noteInput').value;
        const output = document.getElementById('graphDiv');
        
        // Auto Save to LocalStorage
        localStorage.setItem('myMindMapNotes', input);
        
        output.removeAttribute('data-processed');
        output.innerHTML = input;
        
        try {
            await mermaid.run({ nodes: [output] });
        } catch (e) {}
    }

    function toggleDark() {
        document.body.classList.toggle('dark');
    }

    function clearNotes() {
        if(confirm("‡§∏‡§ó‡§≥‡•ç‡§Ø‡§æ ‡§®‡•ã‡§ü‡•ç‡§∏ ‡§™‡•Å‡§∏‡•Ç‡§® ‡§ü‡§æ‡§ï‡§æ‡§Ø‡§ö‡•ç‡§Ø‡§æ ‡§ï‡§æ?")) {
            document.getElementById('noteInput').value = "mindmap\n  root((‡§Æ‡•Å‡§ñ‡•ç‡§Ø ‡§µ‡§ø‡§∑‡§Ø))";
            renderMap();
        }
    }

    function copyText() {
        const text = document.getElementById('noteInput');
        text.select();
        document.execCommand('copy');
        alert("Notes copied!");
    }

    function downloadMap() {
        alert("‡§ü‡•Ä‡§™: ‡§á‡§Æ‡•á‡§ú ‡§°‡§æ‡§ä‡§®‡§≤‡•ã‡§° ‡§ï‡§∞‡§£‡•ç‡§Ø‡§æ‡§∏‡§æ‡§†‡•Ä ‡§Æ‡•Ö‡§™‡§µ‡§∞ ‡§∞‡§æ‡§á‡§ü ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡•Ç‡§® 'Save Image As' ‡§ï‡§∞‡§æ.");
    }
</script>

</body>
</html>
