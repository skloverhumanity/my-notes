<!DOCTYPE html>
<html lang="mr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Super MindMap Pro</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.2.4/dist/mermaid.min.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <style>
        body { font-family: 'Segoe UI', sans-serif; margin: 0; display: flex; flex-direction: column; height: 100vh; background: #f0f4f8; }
        header { background: #f4b400; color: white; padding: 12px; font-weight: bold; text-align: center; font-size: 1.2em; }
        .main { display: flex; flex: 1; overflow: hidden; }
        .editor { width: 320px; background: white; padding: 15px; display: flex; flex-direction: column; border-right: 1px solid #d1d9e0; box-shadow: 2px 0 10px rgba(0,0,0,0.05); }
        textarea { flex: 1; margin-bottom: 10px; padding: 12px; border: 1px solid #ced4da; border-radius: 6px; resize: none; font-size: 13px; outline: none; }
        button { padding: 12px; cursor: pointer; border: none; border-radius: 6px; font-weight: bold; margin-bottom: 8px; transition: 0.2s; }
        .btn-run { background: #007bff; color: white; }
        .btn-run:hover { background: #0056b3; }
        .btn-img { background: #28a745; color: white; }
        .viewer { flex: 1; padding: 20px; overflow: auto; background: white; display: flex; justify-content: center; }
        #capture-area { padding: 40px; display: inline-block; background: white; }
    </style>
</head>
<body>

<header>üß† Professional MindMap Converter</header>

<div class="main">
    <div class="editor">
        <textarea id="noteInput" placeholder="‡§Æ‡•ã‡§†‡•Ä ‡§Æ‡§æ‡§π‡§ø‡§§‡•Ä ‡§á‡§•‡•á ‡§™‡•á‡§∏‡•ç‡§ü ‡§ï‡§∞‡§æ...">‡§Æ‡§æ‡§ù‡§æ ‡§ï‡•ç‡§≤‡§æ‡§â‡§° ‡§™‡•ç‡§≤‡•Ö‡§®
  Development
    Google Colab
    GitHub Codespaces
  Storage
    GitHub
  Database
    MongoDB Atlas</textarea>
        <button class="btn-run" onclick="generateMindMap()">‡§Æ‡•Ö‡§™ ‡§ú‡§®‡§∞‡•á‡§ü ‡§ï‡§∞‡§æ</button>
        <button class="btn-img" onclick="saveImage()">Download PNG</button>
        <p style="font-size: 10px; color: #6c757d;">‡§ü‡•Ä‡§™: ‡§Æ‡§æ‡§π‡§ø‡§§‡•Ä ‡§ñ‡•Ç‡§™ ‡§Æ‡•ã‡§†‡•Ä ‡§Ö‡§∏‡§≤‡•ç‡§Ø‡§æ‡§∏ ‡§Æ‡•Ö‡§™ ‡§§‡§Ø‡§æ‡§∞ ‡§π‡•ã‡§£‡•ç‡§Ø‡§æ‡§∏ ‡§µ‡•á‡§≥ ‡§≤‡§æ‡§ó‡•Ç ‡§∂‡§ï‡§§‡•ã.</p>
    </div>
    <div class="viewer">
        <div id="capture-area">
            <div id="mermaid-graph" class="mermaid"></div>
        </div>
    </div>
</div>

<script>
    mermaid.initialize({ 
        startOnLoad: false, 
        theme: 'base',
        themeVariables: { primaryColor: '#f4b400', edgeColor: '#007bff' },
        maxTextSize: 90000 // ‡§Æ‡•ã‡§†‡•Ä ‡§Æ‡§æ‡§π‡§ø‡§§‡•Ä ‡§π‡§æ‡§§‡§æ‡§≥‡§£‡•ç‡§Ø‡§æ‡§∏‡§æ‡§†‡•Ä ‡§Æ‡§∞‡•ç‡§Ø‡§æ‡§¶‡§æ ‡§µ‡§æ‡§¢‡§µ‡§≤‡•Ä
    });

    async function generateMindMap() {
        const input = document.getElementById('noteInput').value;
        const container = document.getElementById('mermaid-graph');
        
        if (!input.trim()) return;

        let lines = input.split('\n');
        // ‡§™‡§π‡§ø‡§≤‡•Ä ‡§ì‡§≥ ‡§Æ‡•Å‡§ñ‡•ç‡§Ø ‡§µ‡§ø‡§∑‡§Ø ‡§Æ‡•ç‡§π‡§£‡•Ç‡§® ‡§∏‡•á‡§ü ‡§ï‡§∞‡§£‡•á
        let title = lines[0].trim().replace(/[^\u0900-\u097F\w\s]/g, '').substring(0, 50);
        let mCode = `mindmap\n  root((${title}))\n`;

        for (let i = 1; i < lines.length; i++) {
            let line = lines[i].trim();
            // ‡§Ö‡§®‡§æ‡§µ‡§∂‡•ç‡§Ø‡§ï ‡§ö‡§ø‡§®‡•ç‡§π‡•á ‡§Ü‡§£‡§ø ‡§≤‡§ø‡§Ç‡§ï‡•ç‡§∏ ‡§ï‡§æ‡§¢‡§£‡•á
            let clean = line.replace(/https?:\/\/[^\s]+/g, '')
                            .replace(/[‚Ä¢\-\(\)\[\]\{\}\:\*\/]/g, '')
                            .trim();

            if (clean.length > 1) {
                // ‡§ì‡§≥‡•Ä ‡§ñ‡•Ç‡§™ ‡§≤‡§æ‡§Ç‡§¨ ‡§Ö‡§∏‡§≤‡•ç‡§Ø‡§æ‡§∏ ‡§§‡•ç‡§Ø‡§æ ‡§§‡•ã‡§°‡§£‡•á
                let safeText = clean.substring(0, 40);
                // Hierarchy ‡§†‡§∞‡§µ‡§£‡•á (‡§∏‡•ã‡§™‡•ç‡§Ø‡§æ ‡§™‡§¶‡•ç‡§ß‡§§‡•Ä‡§®‡•á)
                if (lines[i].startsWith(' ') || lines[i].startsWith('\t')) {
                    mCode += `    ${safeText}\n`;
                } else {
                    mCode += `  ${safeText}\n`;
                }
            }
        }

        container.removeAttribute('data-processed');
        container.innerHTML = mCode;

        try {
            await mermaid.run({ nodes: [container] });
        } catch (err) {
            console.error(err);
            container.innerHTML = "<p style='color:red;'>‡§Æ‡§æ‡§π‡§ø‡§§‡•Ä ‡§ñ‡•Ç‡§™‡§ö ‡§Æ‡•ã‡§†‡•Ä ‡§Ü‡§π‡•á! ‡§ï‡•É‡§™‡§Ø‡§æ ‡§≠‡§æ‡§ó‡§æ‡§≠‡§æ‡§ó‡§æ‡§Ç‡§§ ‡§™‡•á‡§∏‡•ç‡§ü ‡§ï‡§∞‡§æ.</p>";
        }
    }

    function saveImage() {
        const area = document.getElementById('capture-area');
        html2canvas(area, { scale: 2 }).then(canvas => {
            const link = document.createElement('a');
            link.download = 'Smart-MindMap.png';
            link.href = canvas.toDataURL();
            link.click();
        });
    }

    window.onload = generateMindMap;
</script>

</body>
</html>
