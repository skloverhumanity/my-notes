<!DOCTYPE html>
<html lang="mr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Super Smart MindMap</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.2.4/dist/mermaid.min.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <style>
        body { font-family: sans-serif; margin: 0; background: #f0f2f5; display: flex; flex-direction: column; height: 100vh; }
        header { background: #f4b400; color: white; padding: 10px; font-weight: bold; text-align: center; }
        .main { display: flex; flex: 1; overflow: hidden; }
        .editor { width: 350px; background: white; padding: 15px; display: flex; flex-direction: column; border-right: 1px solid #ccc; }
        textarea { flex: 1; margin-bottom: 10px; padding: 10px; border: 1px solid #ddd; border-radius: 4px; resize: none; font-size: 13px; line-height: 1.4; }
        button { padding: 12px; cursor: pointer; border: none; border-radius: 4px; font-weight: bold; margin-bottom: 5px; }
        .btn-blue { background: #4285f4; color: white; }
        .btn-green { background: #34a853; color: white; }
        .viewer { flex: 1; padding: 20px; overflow: auto; background: white; }
        #capture-area { display: inline-block; padding: 20px; background: white; min-width: 800px; }
    </style>
</head>
<body>

<header>üöÄ AI Note to MindMap Converter</header>

<div class="main">
    <div class="editor">
        <textarea id="textInput" placeholder="‡§§‡•Å‡§Æ‡§ö‡•Ä ‡§Æ‡•ã‡§†‡•Ä ‡§®‡•ã‡§ü ‡§á‡§•‡•á ‡§™‡•á‡§∏‡•ç‡§ü ‡§ï‡§∞‡§æ...">Cloud Developer Checklist
  Google Colab
    Python Coding
  GitHub Codespaces
    VS Code in Browser
  GitHub
    Unlimited Storage
  MongoDB Atlas
    NoSQL Database</textarea>
        <button class="btn-blue" onclick="makeSmartMap()">‡§Æ‡§æ‡§á‡§Ç‡§° ‡§Æ‡•Ö‡§™ ‡§¨‡§®‡§µ‡§æ</button>
        <button class="btn-green" onclick="downloadImg()">Download PNG</button>
        <p id="msg" style="font-size: 11px; color: gray;">‡§ü‡•Ä‡§™: ‡§≤‡§ø‡§Ç‡§ï ‡§ï‡§ø‡§Ç‡§µ‡§æ ‡§Æ‡•ã‡§†‡•Ä ‡§ö‡§ø‡§®‡•ç‡§π‡•á ‡§Æ‡•Ö‡§™‡§Æ‡§ß‡•ç‡§Ø‡•á ‡§Ø‡•á‡§£‡§æ‡§∞ ‡§®‡§æ‡§π‡•Ä‡§§.</p>
    </div>
    <div class="viewer">
        <div id="capture-area">
            <div id="output" class="mermaid"></div>
        </div>
    </div>
</div>

<script>
    mermaid.initialize({ startOnLoad: false, theme: 'forest', securityLevel: 'loose' });

    async function makeSmartMap() {
        const input = document.getElementById('textInput').value;
        const display = document.getElementById('output');
        
        if (!input.trim()) return;

        let lines = input.split('\n');
        let mCode = "mindmap\n";
        
        // ‡§™‡§π‡§ø‡§≤‡•Ä ‡§ì‡§≥ ‡§Æ‡•Å‡§ñ‡•ç‡§Ø ‡§µ‡§ø‡§∑‡§Ø
        let rootTitle = lines[0].trim().substring(0, 40).replace(/[^\u0900-\u097F\w\s]/g, '');
        mCode += `  root((${rootTitle}))\n`;

        for (let i = 1; i < lines.length; i++) {
            let line = lines[i];
            // ‡§≤‡§ø‡§Ç‡§ï, ‡§à‡§Æ‡•á‡§≤ ‡§Ü‡§£‡§ø ‡§ï‡§Ç‡§∏‡§æ‡§§‡§≤‡•Ä ‡§Æ‡§æ‡§π‡§ø‡§§‡•Ä ‡§ï‡§æ‡§¢‡•Ç‡§® ‡§ü‡§æ‡§ï‡§£‡•á ( cleaning )
            let clean = line.replace(/https?:\/\/[^\s]+/g, '') // Remove URLs
                            .replace(/\([^)]*\)/g, '')         // Remove brackets text
                            .replace(/[‚Ä¢\-\[\]\(\)\{\}\:\/]/g, '') // Remove symbols
                            .trim();

            if (clean.length > 2) {
                // ‡§∂‡§¨‡•ç‡§¶‡§æ‡§Ç‡§ö‡•Ä ‡§≤‡§æ‡§Ç‡§¨‡•Ä ‡§Æ‡§∞‡•ç‡§Ø‡§æ‡§¶‡§ø‡§§ ‡§†‡•á‡§µ‡§£‡•á ‡§ú‡•á‡§£‡•á‡§ï‡§∞‡•Ç‡§® ‡§Æ‡•Ö‡§™ ‡§ö‡§æ‡§Ç‡§ó‡§≤‡§æ ‡§¶‡§ø‡§∏‡•á‡§≤
                let shortText = clean.substring(0, 50); 
                
                // ‡§ú‡§∞ ‡§ì‡§≥‡•Ä‡§ö‡•Ä ‡§∏‡•Å‡§∞‡•Å‡§µ‡§æ‡§§ ‡§∏‡•ç‡§™‡•á‡§∏‡§®‡•á ‡§Ö‡§∏‡•á‡§≤ ‡§§‡§∞ ‡§§‡•ç‡§Ø‡§æ‡§≤‡§æ ‡§∏‡§¨-‡§®‡•ã‡§° ‡§¨‡§®‡§µ‡§£‡•á
                if (line.startsWith(' ') || line.startsWith('\t') || line.startsWith('‚Ä¢')) {
                    mCode += `    ${shortText}\n`;
                } else {
                    mCode += `  ${shortText}\n`;
                }
            }
        }

        display.removeAttribute('data-processed');
        display.innerHTML = mCode;
        
        try {
            await mermaid.run({ nodes: [display] });
        } catch (err) {
            console.error(err);
            display.innerHTML = "<p style='color:red;'>‡§Æ‡•Ö‡§™ ‡§¨‡§®‡§µ‡§§‡§æ‡§®‡§æ ‡§Ö‡§°‡§ö‡§£ ‡§Ü‡§≤‡•Ä. ‡§ï‡•É‡§™‡§Ø‡§æ ‡§Æ‡§æ‡§π‡§ø‡§§‡•Ä ‡§•‡•ã‡§°‡•Ä ‡§ï‡§Æ‡•Ä ‡§ï‡§∞‡§æ ‡§ï‡§ø‡§Ç‡§µ‡§æ ‡§∏‡§æ‡§ß‡•Ä ‡§†‡•á‡§µ‡§æ.</p>";
        }
    }

    function downloadImg() {
        const area = document.getElementById('capture-area');
        html2canvas(area, { scale: 2 }).then(canvas => {
            const link = document.createElement('a');
            link.download = 'Cloud-Checklist.png';
            link.href = canvas.toDataURL();
            link.click();
        });
    }

    window.onload = makeSmartMap;
</script>

</body>
</html>
